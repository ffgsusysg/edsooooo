<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة حسين الهاشمي 2026</title>
    <!-- تضمين مكتبة Tailwind CSS من CDN للحصول على تصميم عصري -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- تضمين مكتبة Video.js لتشغيل الفيديو -->
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
    <!-- إضافة مكون Video.js الإضافي لتشغيل صيغة HLS (.m3u8) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js"></script>
    <!-- خطوط عربية جميلة -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* تعريف الخط الأساسي لتطبيقه على جميع العناصر */
        body {
            font-family: 'Tajawal', sans-serif;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        /* تعريف ألوان الوضع الليلي باستخدام متغيرات CSS */
        :root {
            --bg-color: #0d1117;
            --card-bg: #161b22;
            --text-color: #e6edf3;
            --primary-color: #4c8bf5;
            --secondary-text: #8b949e;
        }

        /* تعريف ألوان الوضع الفاتح */
        .light-mode {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-color: #333;
            --primary-color: #1a73e8;
            --secondary-text: #666;
        }

        /* تطبيق ألوان الخلفية والنص على جسم الصفحة */
        .dark-mode-bg {
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        /* تخصيص مؤشر التحميل */
        .loading-spinner {
            border: 4px solid var(--secondary-text);
            border-top: 4px solid var(--primary-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>

<body class="dark-mode-bg">
    <div id="app-container" class="container mx-auto p-4 flex flex-col items-center min-h-screen">
        <!-- قسم بطاقة المدرس - يظهر في البداية -->
        <div id="teacherCard" class="transition-all duration-700 ease-in-out">
            <div class="bg-gradient-to-br from-card-bg to-[#1c222c] border border-[#21262d] p-8 md:p-12 rounded-3xl shadow-2xl flex flex-col items-center text-center cursor-pointer hover:shadow-primary-color/30 hover:scale-105 transform transition-all duration-500 max-w-lg mx-auto">
                <img src="https://placehold.co/200x200/4c8bf5/ffffff?text=صورة+مدرس" alt="صورة المدرس حسين الهاشمي" class="w-48 h-48 rounded-full object-cover border-4 border-primary-color shadow-xl transition-all duration-500 hover:border-text-color">
                <div class="mt-8">
                    <h1 class="text-4xl md:text-5xl font-bold text-primary-color transition-colors duration-500 drop-shadow-lg">
                        حسين الهاشمي 2026
                    </h1>
                    <p class="text-xl md:text-2xl mt-2 text-secondary-text transition-colors duration-500">
                        كيمياء سادس علمي
                    </p>
                </div>
            </div>
        </div>

        <!-- قسم المحاضرات - يظهر بعد النقر على البطاقة -->
        <div id="lecturesSection" class="w-full max-w-4xl hidden flex-col items-center pt-8">
            <div class="w-full flex flex-col md:flex-row-reverse justify-between items-center gap-4 mb-8">
                <button id="backButton" class="back-button bg-primary-color text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 hover:bg-blue-600 shadow-md w-full md:w-auto">
                    العودة
                </button>
                <input type="text" id="searchInput" placeholder="ابحث عن المحاضرة..." class="flex-grow w-full md:w-auto px-6 py-3 rounded-xl bg-card-bg border border-gray-700 text-text-color focus:outline-none focus:ring-2 focus:ring-primary-color transition-all duration-300">
                <button id="themeToggle" class="theme-button bg-gray-600 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 hover:bg-gray-700 shadow-md w-full md:w-auto">
                    الوضع الفاتح
                </button>
            </div>

            <!-- قائمة المحاضرات -->
            <div id="lecturesList" class="w-full space-y-4">
                <!-- المحاضرات سيتم إضافتها هنا بواسطة JavaScript -->
            </div>
        </div>

        <!-- قسم مشغل الفيديو - يظهر عند اختيار المحاضرة -->
        <div id="videoPlayerSection" class="w-full max-w-4xl hidden flex-col items-center pt-8">
            <button id="backToLectures" class="back-button bg-primary-color text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 hover:bg-blue-600 shadow-md mb-6 w-full md:w-auto">
                العودة إلى المحاضرات
            </button>
            <div class="w-full relative rounded-xl overflow-hidden shadow-2xl">
                <!-- مؤشر التحميل يظهر قبل تشغيل الفيديو -->
                <div id="loadingSpinner" class="absolute inset-0 flex items-center justify-center bg-card-bg/80 z-10 transition-opacity duration-300 opacity-0 hidden">
                    <div class="loading-spinner"></div>
                </div>
                <!-- مشغل الفيديو -->
                <video id="my-video" class="video-js vjs-theme-forest w-full aspect-video" controls preload="auto" data-setup="{}">
                    <source src="" type="application/x-mpegURL" />
                    <p class="vjs-no-js text-center p-4">
                        لتشغيل هذا الفيديو، الرجاء تفعيل JavaScript، أو استخدام متصفح يدعم HTML5.
                    </p>
                </video>
            </div>
        </div>
    </div>

    <!-- تضمين مكتبة Video.js -->
    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
    <script>
        // تحديد العناصر الأساسية في الصفحة
        const teacherCard = document.getElementById('teacherCard');
        const lecturesSection = document.getElementById('lecturesSection');
        const backButton = document.getElementById('backButton');
        const searchInput = document.getElementById('searchInput');
        const lecturesList = document.getElementById('lecturesList');
        const themeToggle = document.getElementById('themeToggle');
        const videoPlayerSection = document.getElementById('videoPlayerSection');
        const backToLectures = document.getElementById('backToLectures');
        const loadingSpinner = document.getElementById('loadingSpinner');

        // تهيئة مشغل الفيديو
        const myPlayer = videojs('my-video');

        // بيانات المحاضرات (يمكن تحديثها بسهولة)
        // ملاحظة: تم تحديث رابط الفيديو ليكون أكثر موثوقية كنموذج تجريبي
        const videoUrl = 'https://tiny-fire-acee.hmyzc824-d08.workers.dev/?url=https%3A%2F%2Fvz-66cdc7f5-9f3.b-cdn.net%2Fbcdn_token%3DOvHm2YqnbdTGsSyEkKVVz5BbcTT-CHI-fkHM9SkNs6E%26expires%3D1755335590%26token_path%3D%252Fd6e13cc8-7339-42a7-8b0f-11be84bd82dd%252F%2Fd6e13cc8-7339-42a7-8b0f-11be84bd82dd%2Fplaylist.m3u8';
        const lectures = [
            { id: 1, title: 'محاضرة 1: أساسيات الكيمياء', chapter: 'الفصل الأول' },
            { id: 2, title: 'محاضرة 2: التفاعلات الكيميائية', chapter: 'الفصل الأول' },
            { id: 3, title: 'محاضرة 3: المعادلات الكيميائية', chapter: 'الفصل الأول' },
            { id: 4, title: 'محاضرة 4: الكيمياء العضوية', chapter: 'الفصل الثاني' },
            { id: 5, title: 'محاضرة 5: الهيدروكربونات', chapter: 'الفصل الثاني' },
            { id: 6, title: 'محاضرة 6: الكيمياء غير العضوية', chapter: 'الفصل الثالث' },
            { id: 7, title: 'محاضرة 7: المركبات الأيونية', chapter: 'الفصل الثالث' },
            { id: 8, title: 'محاضرة 8: الكيمياء الحيوية', chapter: 'الفصل الرابع' },
            { id: 9, title: 'محاضرة 9: البروتينات والكربوهيدرات', chapter: 'الفصل الرابع' },
            { id: 10, title: 'محاضرة 10: الكيمياء النووية', chapter: 'الفصل الخامس' },
        ];

        // دالة لعرض المحاضرات بناءً على مصطلح البحث
        function renderLectures(searchTerm = '') {
            lecturesList.innerHTML = '';
            const filteredLectures = lectures.filter(lecture =>
                lecture.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                lecture.chapter.toLowerCase().includes(searchTerm.toLowerCase())
            );

            if (filteredLectures.length === 0) {
                lecturesList.innerHTML = `<p class="text-center text-secondary-text mt-4">لا توجد نتائج مطابقة.</p>`;
            } else {
                filteredLectures.forEach(lecture => {
                    const lectureItem = document.createElement('div');
                    lectureItem.className = 'lecture-item bg-card-bg p-6 rounded-2xl shadow-lg border-r-4 border-primary-color cursor-pointer transition-all duration-300 hover:translate-x-3 hover:shadow-xl';
                    lectureItem.innerHTML = `
                        <h3 class="text-2xl font-bold text-primary-color">${lecture.title}</h3>
                        <p class="mt-2 text-secondary-text">${lecture.chapter}</p>
                    `;
                    lectureItem.addEventListener('click', () => {
                        playVideo();
                    });
                    lecturesList.appendChild(lectureItem);
                });
            }
        }

        // دوال التنقل بين الأقسام
        function showLectures() {
            teacherCard.classList.add('hidden');
            lecturesSection.classList.remove('hidden');
            lecturesSection.classList.add('flex');
            videoPlayerSection.classList.add('hidden');
            myPlayer.pause();
            renderLectures();
        }

        function showTeacherCard() {
            teacherCard.classList.remove('hidden');
            lecturesSection.classList.add('hidden');
            videoPlayerSection.classList.add('hidden');
            myPlayer.pause();
        }

        function playVideo() {
            teacherCard.classList.add('hidden');
            lecturesSection.classList.add('hidden');
            videoPlayerSection.classList.remove('hidden');
            videoPlayerSection.classList.add('flex');
            
            // إظهار مؤشر التحميل قبل بدء التشغيل
            loadingSpinner.classList.remove('hidden');
            loadingSpinner.classList.add('opacity-100');

            // إعداد وتشغيل الفيديو
            myPlayer.src({ src: videoUrl, type: 'application/x-mpegURL' });
            myPlayer.load();

            myPlayer.on('loadeddata', () => {
                loadingSpinner.classList.remove('opacity-100');
                loadingSpinner.classList.add('opacity-0');
                setTimeout(() => loadingSpinner.classList.add('hidden'), 300); // إخفاء العنصر بعد الانتقال
                myPlayer.play();
            });

            myPlayer.on('error', (e) => {
                console.error("Video.js Error:", myPlayer.error());
                loadingSpinner.classList.remove('opacity-100');
                loadingSpinner.classList.add('opacity-0');
                setTimeout(() => loadingSpinner.classList.add('hidden'), 300);
            });
        }

        function returnToLectures() {
            myPlayer.pause();
            myPlayer.reset();
            showLectures();
        }

        // إضافة معالجات الأحداث للتنقل والبحث وتغيير الوضع
        teacherCard.addEventListener('click', showLectures);
        backButton.addEventListener('click', showTeacherCard);
        backToLectures.addEventListener('click', returnToLectures);
        searchInput.addEventListener('input', (e) => {
            renderLectures(e.target.value);
        });

        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            document.body.classList.toggle('dark-mode-bg');
            themeToggle.textContent = document.body.classList.contains('light-mode') ? 'الوضع الليلي' : 'الوضع الفاتح';
        });

        // إظهار البطاقة الرئيسية عند تحميل الصفحة
        showTeacherCard();
    </script>
</body>
</html>
