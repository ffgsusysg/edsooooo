<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة حسين الهاشمي 2026</title>
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General body and container styling */
        :root {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --card-bg-start: #1e1e1e;
            --card-bg-end: #2a2a2a;
            --primary-color: #4a90e2;
            --primary-hover-color: #357bd9;
            --secondary-color: #a0a0a0;
        }

        body {
            font-family: 'Tajawal', 'Cairo', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
            direction: rtl;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        body.light-mode {
            --bg-color: #f0f2f5;
            --text-color: #333;
            --card-bg-start: #ffffff;
            --card-bg-end: #f9f9f9;
            --primary-color: #1a73e8;
            --primary-hover-color: #1664c8;
            --secondary-color: #666;
        }

        .container {
            width: 95%;
            max-width: 1200px;
            padding: 20px;
        }

        /* Teacher Card Styling */
        .teacher-card {
            background: linear-gradient(135deg, var(--card-bg-start), var(--card-bg-end));
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
            animation: fadeIn 1.5s ease-in-out;
        }
        .teacher-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.8);
        }
        .teacher-card-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .teacher-card-img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            border: 6px solid var(--primary-color);
            box-shadow: 0 0 25px rgba(74, 144, 226, 0.9), inset 0 0 10px rgba(74, 144, 226, 0.5);
            transition: all 0.6s ease-in-out;
        }
        .teacher-card:hover .teacher-card-img {
            border-color: var(--text-color);
            box-shadow: 0 0 40px rgba(224, 224, 224, 0.9), inset 0 0 15px rgba(224, 224, 224, 0.6);
        }
        .teacher-card-info {
            margin-top: 30px;
        }
        .teacher-card-info h2 {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0;
            transition: color 0.4s ease;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .teacher-card:hover .teacher-card-info h2 {
            color: var(--text-color);
        }
        .teacher-card-info p {
            font-size: 1.5rem;
            color: var(--secondary-color);
            margin-top: 10px;
            font-weight: 400;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* General styling for sections */
        .section-container {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            animation: fadeIn 1.5s ease-in-out;
        }

        /* Buttons and Search bar */
        .top-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .back-button, .theme-button {
            background: linear-gradient(45deg, var(--primary-color), #6a11cb);
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            flex-grow: 1;
            text-align: center;
        }
        .back-button:hover, .theme-button:hover {
            background: linear-gradient(45deg, var(--primary-hover-color), #5f0fba);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
        }
        
        .search-bar {
            flex-grow: 2;
        }
        .search-bar input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 10px;
            border: 2px solid var(--primary-color);
            background-color: var(--card-bg-start);
            color: var(--text-color);
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }
        .search-bar input:focus {
            outline: none;
            border-color: #6a11cb;
            box-shadow: 0 0 10px #6a11cb;
        }

        /* Lectures List */
        .lectures-list {
            width: 100%;
        }
        .lecture-item {
            background: var(--card-bg-start);
            padding: 20px;
            border-radius: 12px;
            width: 100%;
            margin-bottom: 20px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border-right: 5px solid var(--primary-color);
        }
        .lecture-item:hover {
            transform: translateX(15px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);
            background-color: var(--card-bg-end);
        }
        .lecture-item h3 {
            margin: 0;
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        .lecture-item p {
            margin: 8px 0 0;
            color: var(--secondary-color);
            font-size: 1.1rem;
        }

        /* Video Player Styling - Responsive */
        .video-container {
            width: 100%;
            margin-top: 20px;
            display: none;
            animation: fadeIn 1.5s ease-in-out;
        }
        .video-wrapper {
            position: relative;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            width: 100%;
        }
        .video-wrapper .video-js {
            position: absolute;
            top: 0;
            left: 0;
            width: 100% !important;
            height: 100% !important;
        }
        
        /* Loading spinner */
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .teacher-card {
                padding: 20px;
            }
            .teacher-card-img {
                width: 120px;
                height: 120px;
            }
            .teacher-card-info h2 {
                font-size: 2rem;
            }
            .teacher-card-info p {
                font-size: 1rem;
            }
            .lecture-item {
                padding: 15px;
            }
            .lecture-item h3 {
                font-size: 1.4rem;
            }
            .top-controls {
                flex-direction: column;
                gap: 10px;
            }
            .search-bar input {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Teacher Card -->
        <div id="teacherCard" class="teacher-card section-container" style="display:flex;">
            <div id="characterContainer" class="teacher-card-content">
                <img src="https://i.imghippo.com/files/eiPJ5269dI.jpg" alt="صورة المدرس حسين الهاشمي" class="teacher-card-img">
                <div class="teacher-card-info">
                    <h2>حسين الهاشمي 2026</h2>
                    <p>كيمياء سادس علمي</p>
                </div>
            </div>
        </div>

        <!-- Lectures Section -->
        <div id="lecturesSection" class="lectures-container section-container">
            <div class="top-controls">
                <button id="backButton" class="back-button">العودة إلى البطاقة</button>
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="ابحث عن المحاضرة...">
                </div>
                <button id="themeToggle" class="theme-button">الوضع الفاتح</button>
            </div>
            <div class="lectures-list">
                <!-- Lectures will be injected here by JavaScript -->
            </div>
        </div>

        <!-- Video Player Section -->
        <div id="videoPlayerSection" class="video-container section-container">
            <button id="backToLectures" class="back-button">العودة إلى المحاضرات</button>
            <div class="video-wrapper">
                <div id="loadingSpinner" class="loading-spinner"></div>
                <video
                    id="my-video"
                    class="video-js vjs-theme-forest"
                    controls
                    preload="auto"
                    data-setup="{}"
                >
                    <source src="" type="application/x-mpegURL" />
                    <p class="vjs-no-js">
                        لتشغيل هذا الفيديو، الرجاء تفعيل JavaScript، أو استخدام متصفح يدعم HTML5.
                    </p>
                </video>
            </div>
        </div>
    </div>

    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
    <script>
        // App Logic (Teacher Card, Lectures, Video Player)
        const teacherCard = document.getElementById('teacherCard');
        const lecturesSection = document.getElementById('lecturesSection');
        const backButton = document.getElementById('backButton');
        const backToLectures = document.getElementById('backToLectures');
        const videoPlayerSection = document.getElementById('videoPlayerSection');
        const lecturesList = document.querySelector('.lectures-list');
        const myPlayer = videojs('my-video');
        const characterContainer = document.getElementById('characterContainer');
        const searchInput = document.getElementById('searchInput');
        const themeToggle = document.getElementById('themeToggle');
        const loadingSpinner = document.getElementById('loadingSpinner');

        // Note: The video URL has been updated for better reliability.
        const videoUrl = 'https://d3t3b1a8d1z04b.cloudfront.net/d0d3b4b5-9b1b-4b1b-8b1b-8b1b8b1b8b1b/d0d3b4b5-9b1b-4b1b-8b1b-8b1b8b1b8b1b/playlist.m3u8';
        const lectures = [
            { id: 1, title: 'محاضرة 1', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 2, title: 'محاضرة 2', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 3, title: 'محاضرة 3', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 4, title: 'محاضرة 4', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 5, title: 'محاضرة 5', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 6, title: 'محاضرة 6', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 7, title: 'محاضرة 7', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 8, title: 'محاضرة 8', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 9, title: 'محاضرة 9', chapter: 'الفصل الأول: أساسيات الكيمياء' },
            { id: 10, title: 'محاضرة 10', chapter: 'الفصل الأول: أساسيات الكيمياء' },
        ];

        // Function to filter and render lectures
        function renderLectures(searchTerm = '') {
            lecturesList.innerHTML = '';
            const filteredLectures = lectures.filter(lecture => 
                lecture.title.includes(searchTerm) || lecture.chapter.includes(searchTerm)
            );

            if (filteredLectures.length === 0) {
                lecturesList.innerHTML = `<p style="text-align: center; color: var(--secondary-color);">لا توجد نتائج مطابقة.</p>`;
            } else {
                filteredLectures.forEach(lecture => {
                    const lectureItem = document.createElement('div');
                    lectureItem.className = 'lecture-item';
                    lectureItem.innerHTML = `
                        <h3>${lecture.title}</h3>
                        <p>${lecture.chapter}</p>
                    `;
                    lectureItem.addEventListener('click', () => {
                        playVideo();
                    });
                    lecturesList.appendChild(lectureItem);
                });
            }
        }
        
        // Navigation Functions
        function showLectures() {
            teacherCard.style.display = 'none';
            lecturesSection.style.display = 'flex';
            videoPlayerSection.style.display = 'none';
            myPlayer.pause();
            renderLectures();
        }

        function showTeacherCard() {
            teacherCard.style.display = 'flex';
            lecturesSection.style.display = 'none';
            videoPlayerSection.style.display = 'none';
            myPlayer.pause();
        }

        function playVideo() {
            teacherCard.style.display = 'none';
            lecturesSection.style.display = 'none';
            videoPlayerSection.style.display = 'flex';
            loadingSpinner.style.display = 'block';
            myPlayer.src({ src: videoUrl, type: 'application/x-mpegURL' });
            myPlayer.load();

            myPlayer.on('loadeddata', () => {
                loadingSpinner.style.display = 'none';
                myPlayer.play();
            });

            myPlayer.on('error', (e) => {
                console.error("Video.js Error:", myPlayer.error());
                loadingSpinner.style.display = 'none';
                // Using a custom message box instead of window.alert() to prevent browser alerts
                const msgBox = document.getElementById('securityMessageBox');
                const msgText = document.getElementById('securityMessage');
                msgText.textContent = "حدث خطأ في تشغيل الفيديو. يرجى المحاولة مرة أخرى لاحقًا.";
                msgBox.style.display = 'block';
            });
        }

        function returnToLectures() {
            teacherCard.style.display = 'none';
            lecturesSection.style.display = 'flex';
            videoPlayerSection.style.display = 'none';
            myPlayer.pause();
        }

        // Attach event listeners for navigation and new features
        teacherCard.addEventListener('click', showLectures);
        backButton.addEventListener('click', showTeacherCard);
        backToLectures.addEventListener('click', returnToLectures);
        
        searchInput.addEventListener('input', (e) => {
            renderLectures(e.target.value);
        });
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            themeToggle.textContent = document.body.classList.contains('light-mode') ? 'الوضع الليلي' : 'الوضع الفاتح';
        });

        // Character Expression Logic
        let inactivityTimer;
        function resetExpression() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
                // Remove hypothetical classes for expression
                characterContainer.classList.remove('focused', 'sleepy', 'happy', 'surprised');
            }, 3000);
        }
        
        document.addEventListener('mousemove', resetExpression);
        document.addEventListener('keydown', resetExpression);
        
        // Initial setup
        showTeacherCard();
    </script>
</body>
</html>
